---
title: 正则表达式
date: 2017年3月29日15:19:49
tags:
 - 正则表达式
---

### 浏览器JS中的正则

> 以下均使用Chrome内置的Repl来测试正则

- string.match仅返回给定字符串中匹配正则的部分，通过全局标识可以指定是否全部匹配
- regExp.exec返回的是匹配的部分和每一个给定的捕获组。
 

### 一般的正则规范

- *表示前一个正则标识符匹配任意多次（包括0次）
- ?在子表达式之后与{0,1}意义相同，在限制符之后表示非贪婪匹配模式（默认是贪婪匹配）
- \NUM 中的数字标识对第几个捕获组的引用
- 

### 正则的优化
- 不要把正则表达式直接放在循环中例如 while(str.test(/./)) ，这样会重复创建正则对象，使用
```
var reg = new RegExp(".","g");
while(str.test(reg))
```

- 正则表达式的书写方式会影响搜索速度，比如/\^(ab|cd)/等价于/(\^ab|\^cd)/，但是前一个会搜索整个字符串，前一个会把搜索起点固定在字符串首部，只搜索一个位置。

### 正则的应用
- trim函数
```
str = str.replace(/^\s+/,"").replace(/\s+$/,"");//两次匹配
str = str.replace(/(^\s+)|(\s+$)/,"");//一次匹配（括号可去掉，速度慢于两次匹配）

str = str.replace(/^\s*([\s\S]*?)\s*$/,"$1");//非贪婪匹配
str = str.replace(/^\s*([\s\S]*\S)?\s*$/,"$1");//贪婪匹配（速度快于非贪婪匹配）

str = str.replace(/^\s*(\S+(\s+\S+)*)\s*$/,"$1")//贪婪匹配，速度最慢的一个
```